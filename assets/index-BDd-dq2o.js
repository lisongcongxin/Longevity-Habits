import{i as e,u as t,j as i,r as s,N as a,a as n,b as r,c as o,d as l,e as d,R as c,B as m}from"./vendor-react-Cf25kvOq.js";import{a0 as p,a1 as h,o as g,f as x,m as u,s as b,a2 as y,a3 as f,a4 as v,a5 as k,a6 as w,a7 as j,a8 as N,a9 as S}from"./vendor-uJMtiGQS.js";import{c as M,p as C}from"./vendor-app-Blm_uZh2.js";import{g as I,h as T}from"./vendor-ai-AmLGZNmW.js";const A={ai_config:{insights_advisor:{model:"openai-gpt-4o-mini",temperature:.45,maxTokens:900,system_prompt:"You are the YouWare longevity AI coach. Deliver concise, encouraging insights that help the user optimize ten-minute habit stacks."}},metadata:{version:"1.0.0",owner:"Pulse10 Insights"}};globalThis.ywConfig||(globalThis.ywConfig=A);const P={app:{windowTitle:"Pulse·10 · Daily Longevity Habits"},language:{label:"Language",en:"English",zh:"简体中文"},nav:{today:"Today",session:"Session",insights:"Insights",profile:"Profile"},topBar:{brand:"Pulse·10",tagline:"Longevity dashboard"},common:{level:"Level",streak:"Streak",daySuffix:"{{count}}d",days:"{{count}} days",back:"Back",next:"Next"},progress:{title:"Today's Snapshot",completedLabel:"{{count}} / {{total}} habits",energy:"Energy",readiness:"Readiness",xp:"XP",lastDays:"Last 14 days",heatmapTooltip:"{{date}} · {{count}} habits",energyLevels:{low:"Low",steady:"Steady",high:"High"}},habits:{stages:{activate:"Activate",elevate:"Elevate",master:"Master"},intensity:{light:"Light",moderate:"Moderate",vigorous:"Vigorous"},actions:{complete:"Complete",logged:"Logged"},metrics:"{{minutes}} min · {{intensity}}",completeNoteTemplate:"{{title}} complete",tags:{morning:"Morning",recovery:"Recovery",desk:"Desk","low-impact":"Low impact",anywhere:"Anywhere",progressive:"Progressive",afternoon:"Afternoon","brain-health":"Brain health",cardio:"Cardio",advanced:"Advanced",evening:"Evening",sleep:"Sleep",midday:"Midday",equipment:"Equipment",longevity:"Longevity",neuro:"Neuro"},items:{"h-priming-breath":{title:"Priming Breath Ladder",description:"Guided nasal breathing with extended exhales to prime the nervous system."},"h-spine-mobility":{title:"Spinal Mobility Flow",description:"Cat-cow, thoracic rotations, and segmental bridge to wake up the spine."},"h-strength-microdose":{title:"Strength Microdose Stack",description:"Alternating tempo squats, offset push, and loaded carry pattern with bodyweight or bands."},"h-cognition-primer":{title:"Cognitive Primer",description:"Dual-task drills and pattern switching to sharpen focus and reaction times."},"h-metabolic-surge":{title:"Metabolic Surge Intervals",description:"Low-impact plyometrics with controlled intervals to raise heart rate safely."},"h-evening-reset":{title:"Evening Reset Downshift",description:"Parasympathetic breath, light mobility, and journaling prompts to close the day."},"h-fascia-glide":{title:"Fascial Glide Wake Up",description:"Loaded mobility with bands to hydrate fascia and improve tissue glide."},"h-balance-brain":{title:"Balance + Brain Combo",description:"Single-leg balance with cognitive load for proprioception and neuro resilience."}}},gamification:{title:"Momentum Engine",levelTag:"Level {{level}}",xpProgress:"XP Progress",xpSummary:"{{total}} total XP · {{next}} to next level",currentStreak:"Current Streak",longestStreak:"Longest streak: {{count}} days",badges:"Badges",noBadges:"Stack habits to unlock your first badge."},badges:{"badge-streak-3":{name:"Momentum Spark",condition:"Complete 3 days in a row"},"badge-streak-7":{name:"Longevity Loop",condition:"Maintain a 7-day streak"},"badge-mission-complete":{name:"Mission Architect",condition:"Complete any seasonal mission"},"badge-evening-champion":{name:"Evening Champion",condition:"Log 5 evening resets in a month"},"badge-oxygen-master":{name:"Oxygen Mastery",condition:"Accumulate 60 minutes of breathwork"}},insightsFeed:{title:"AI Coach Review",subtitle:"Personalized adjustments based on your last sessions.",refresh:"Refresh insights",loading:"Generating insights...",empty:"Complete a stack to unlock your first insight.",noHistory:"Log at least one day to unlock AI guidance.",errorGeneric:"We could not refresh AI insights. Try again shortly.",errorEmpty:"AI did not return new guidance. Log fresh activity and retry.",lastUpdated:"Updated {{time}}"},insightsPage:{logTitle:"Execution Log",logSubtitle:"Review micro wins and reflections captured across days."},history:{empty:"No sessions logged yet. Complete today's stack to generate signals.",summary:"{{count}} habits · Readiness {{readiness}}",mood:"Mood: {{mood}}",moods:{calm:"Calm",focused:"Focused",energized:"Energized",stressed:"Stressed"},notes:"Notes: {{notes}}",reflection:"Reflection: {{notes}}"},dashboard:{todayTitle:"Today's Longevity Stack",tapHint:"Tap to log completion",missionsTitle:"Seasonal Missions",missionsSubtitle:"Cycle micro-challenges to keep your momentum high."},missions:{reward:"Reward: {{xp}} XP",focus:{mobility:"Mobility",resilience:"Resilience",recovery:"Recovery",metabolic:"Metabolic"},"mission-stability-foundation":{title:"Stability Foundation",description:"Complete 5 mobility-focused sessions this week to unlock the Movement Catalyst badge.",requirements:["Complete 5 mobility habits","Log mobility reflection 3 times"]},"mission-oxygen-advantage":{title:"Oxygen Advantage",description:"Balance stress and energy by pairing breathwork with focused recovery blocks.",requirements:["Complete breathwork 3 mornings","Log readiness score each day"]},"mission-evening-elite":{title:"Evening Elite",description:"Dial in your wind-down routine to amplify deep sleep and recovery scores.",requirements:["Complete evening reset 4 times","Document evening reflections twice"]},"mission-metabolic-momentum":{title:"Metabolic Momentum",description:"Prime metabolic health with repeated cardio microdoses across the week.",requirements:["Complete metabolic surge 3 times","Maintain streak for 4 days"]}},sessions:{focus:{longevity:"Longevity",recovery:"Recovery",performance:"Performance"},templates:{"template-daily-primer":{title:"Daily Longevity Primer",goal:"Mobilize, energize, and focus in 10 minutes.",phases:{"phase-prime-breath":{title:"Priming Breath Ladder",description:"Guided nasal ladder breathing with extended exhales."},"phase-mobility-stack":{title:"Mobility Stack",description:"Spinal mobility flow to hydrate joints and fascia."},"phase-strength-dose":{title:"Strength Microdose",description:"Tempo squats with offset push pattern to build strength safely."}}},"template-evening-reset":{title:"Evening Nervous System Reset",goal:"Downshift and prepare for deep, restorative sleep.",phases:{"phase-downshift-breath":{title:"Downshift Breath",description:"Parasympathetic breath with 4-6 cadence."},"phase-fascia-glide":{title:"Fascial Glide",description:"Band-supported spiral mobility to release tension."},"phase-reflection":{title:"Reflection + Journaling",description:"Capture micro-wins and readiness cues for tomorrow."}}},"template-metabolic-surge":{title:"Metabolic Surge Express",goal:"Boost metabolic flexibility with controlled cardio bursts.",phases:{"phase-warm-coord":{title:"Warm-up Coordination",description:"Balance + brain patterning to prep nervous system."},"phase-intervals":{title:"Cardio Micro-Intervals",description:"Low-impact plyometric intervals and tempo climbs."},"phase-cool-breath":{title:"Cool Down Breath",description:"Coherence breathing to bring heart rate down."}}}}},session:{startStack:"Start stack",minutes:"{{minutes}} min",activeStack:"Active stack",resume:"Resume",pause:"Pause",finish:"Finish",cancel:"Cancel",totalTime:"Total time",elapsed:"Elapsed",phaseLabel:"Phase",phaseCount:"Phase {{index}}",chooseTitle:"Choose your 10-minute stack",chooseDescription:"Curated blocks blend mobility, breathwork, and strength so you get longevity ROI with minimal friction.",manualReflection:"Session closed manually"},profile:{title:"Personal rhythm",subtitle:"Tweak your time windows and focus areas so Pulse·10 adapts.",wakeWindow:"Wake window",windDownWindow:"Wind-down window",focusAreasTitle:"Focus arenas",focusAreas:{mobility:{label:"Mobility",description:"Keep joints supple and resilient."},strength:{label:"Strength",description:"Maintain muscle and bone density."},cardio:{label:"Cardio",description:"Improve metabolic flexibility."},breathwork:{label:"Breathwork",description:"Balance your nervous system daily."},mindfulness:{label:"Mindfulness",description:"Build emotional regulation."},cognition:{label:"Cognition",description:"Sharpen neuroplasticity."},nutrition:{label:"Nutrition",description:"Embed micro choices for longevity."}},mobilityAccess:"Mobility access",mobilityOptions:{limited:"Limited space",standard:"Standard",full:"Full gym"},savePreferences:"Save preferences",saveHint:"Updates instantly re-tune your habit recommendations.",statsTitle:"Execution stats",statsSubtitle:"Track macro progress and manage your data.",totalHabits:"Total habits",loggedDays:"Logged days",resetToday:"Reset today's log",exportHint:"Want to export data? Use the devtools to copy from localStorage key"},onboarding:{badge:"Pulse·10 Onboarding",title:"Build your longevity ritual",subtitle:"Just 10 minutes a day can stack compounding health wins. Configure your baseline to unlock a personalized flow.",launch:"Launch my plan",preferenceSlots:"Preferred habit slots",preferenceHint:"We'll use these to time your nudges.",environmentHint:"Pulse·10 will suggest 10-minute blocks that match your equipment and daily rhythm. You can re-tune this anytime in Profile.",mobilityOptions:{limited:{label:"Limited",detail:"Hotel room or office space"},standard:{label:"Standard",detail:"Mat + light bands"},full:{label:"Full",detail:"Gym, weights, open space"}},steps:{baseline:{title:"Set your energetic baseline",description:"Choose when you generally want to activate and wind down."},focus:{title:"Dial your longevity focus",description:"Select 3 priority arenas and we'll curate micro doses."},environment:{title:"Gear + environment check",description:"Tell us what space you have so we pick the right variations."}}},ai:{dailyMomentum:{title:"Daily Longevity Momentum",summary:"Locked in your {{count}}-habit momentum today. Keep stacking micro wins.",actions:["Celebrate the execution in your reflection log.","Stack the same pattern at the same time tomorrow for habit strength.","Consider adding breath downshift in the evening for recovery balance."]},sessionComplete:{title:"{{session}} locked",summary:"Captured a full {{session}} stack. XP bonus engaged.",actions:["Log how the session felt to refine AI guidance.","Plan tomorrow's stack now to keep a rolling streak.","Hydrate and get protein within 30 minutes to maximize adaptations."]},weekly:{title:"Weekly Pattern Check",summary:"AI review: readiness {{readiness}} · breath {{breath}} · strength {{strength}}.",actions:{lowReadiness:["Downshift tomorrow with evening reset and extended exhale breathing.","Block an 8-hour sleep window by honoring wind-down time."],breathwork:"Micro-dose breath ladders 3x this week for nervous system balance.",strength:"Schedule strength microdoses on Tue/Thu to protect lean muscle.",energyStable:"Energy stability is excellent - lean into a metabolic surge block.",lockPlan:"Lock your weekly plan: repeat the same habit block at the same time."}}}},L={app:{windowTitle:"Pulse·10 · 每日长寿习惯"},language:{label:"语言",en:"English",zh:"简体中文"},nav:{today:"今日",session:"训练",insights:"洞察",profile:"个人"},topBar:{brand:"Pulse·10",tagline:"长寿指挥台"},common:{level:"等级",streak:"连胜",daySuffix:"{{count}}天",days:"{{count}} 天",back:"返回",next:"下一步"},progress:{title:"今日快照",completedLabel:"{{count}} / {{total}} 个习惯",energy:"能量",readiness:"准备度",xp:"经验值",lastDays:"过去 14 天",heatmapTooltip:"{{date}} · 完成 {{count}} 项",energyLevels:{low:"偏低",steady:"稳定",high:"充沛"}},habits:{stages:{activate:"激活",elevate:"进阶",master:"大师"},intensity:{light:"轻度",moderate:"中等",vigorous:"高强度"},actions:{complete:"记录完成",logged:"已记录"},metrics:"{{minutes}} 分钟 · {{intensity}}",completeNoteTemplate:"{{title}} 已完成",tags:{morning:"晨间",recovery:"恢复",desk:"办公桌","low-impact":"低冲击",anywhere:"随时随地",progressive:"递进式",afternoon:"午后","brain-health":"脑健康",cardio:"有氧",advanced:"进阶",evening:"晚间",sleep:"睡眠",midday:"正午",equipment:"器械",longevity:"长寿",neuro:"神经"},items:{"h-priming-breath":{title:"唤醒式阶梯呼吸",description:"通过延长呼气的鼻呼吸引导，唤醒神经系统。"},"h-spine-mobility":{title:"脊柱流动激活",description:"猫牛式、胸椎旋转与分段桥式，让脊柱苏醒。"},"h-strength-microdose":{title:"力量微剂量组合",description:"交替节奏深蹲、偏移推练与负重搬运，支持体重或弹力带。"},"h-cognition-primer":{title:"认知启动",description:"双任务练习与模式切换，提升专注与反应。"},"h-metabolic-surge":{title:"代谢冲刺间歇",description:"低冲击爆发配合节奏控制，安全提升心率。"},"h-evening-reset":{title:"夜间复位降速",description:"副交感呼吸、轻度活动与日结提示，为睡眠收尾。"},"h-fascia-glide":{title:"筋膜滑动唤醒",description:"搭配弹力带的负重灵活，滋养筋膜与组织滑动。"},"h-balance-brain":{title:"平衡 x 大脑协作",description:"单脚平衡叠加认知负荷，强化本体感受与神经韧性。"}}},gamification:{title:"动力引擎",levelTag:"等级 {{level}}",xpProgress:"经验进度",xpSummary:"累计 {{total}} XP · 距下一级还差 {{next}}",currentStreak:"当前连胜",longestStreak:"最长连胜：{{count}} 天",badges:"勋章",noBadges:"坚持记录，即可解锁首枚勋章。"},badges:{"badge-streak-3":{name:"动能火花",condition:"连续 3 天完成"},"badge-streak-7":{name:"长寿循环",condition:"维持 7 天连胜"},"badge-mission-complete":{name:"任务架构师",condition:"完成任意季节任务"},"badge-evening-champion":{name:"夜间冠军",condition:"单月记录 5 次夜间复位"},"badge-oxygen-master":{name:"氧动高手",condition:"累计 60 分钟呼吸练习"}},insightsFeed:{title:"AI 教练评估",subtitle:"基于你近期训练生成个性化调整。",refresh:"刷新洞察",loading:"AI 洞察生成中...",empty:"先完成一次组合即可解锁首条洞察。",noHistory:"先记录至少一天习惯以解锁 AI 指导。",errorGeneric:"AI 教练暂时无法刷新，请稍后再试。",errorEmpty:"AI 暂无新的建议，补充最新数据后重试。",lastUpdated:"更新于 {{time}}"},insightsPage:{logTitle:"执行记录",logSubtitle:"回顾每日的微胜与反思。"},history:{empty:"尚无训练记录。先完成今日组合以生成信号。",summary:"{{count}} 个习惯 · 准备度 {{readiness}}",mood:"情绪：{{mood}}",moods:{calm:"平静",focused:"专注",energized:"充盈",stressed:"紧张"},notes:"备注：{{notes}}",reflection:"反思：{{notes}}"},dashboard:{todayTitle:"今日长寿组合",tapHint:"点击记录完成",missionsTitle:"季节任务",missionsSubtitle:"轮换小挑战，保持势能累积。"},missions:{reward:"奖励：{{xp}} XP",focus:{mobility:"灵活度",resilience:"韧性",recovery:"恢复",metabolic:"代谢"},"mission-stability-foundation":{title:"稳定根基",description:"本周完成 5 次灵活度训练，解锁动势催化勋章。",requirements:["完成 5 次灵活度习惯","记录 3 次灵活度反思"]},"mission-oxygen-advantage":{title:"氧量优势",description:"以呼吸练习搭配恢复节奏，平衡压力与能量。",requirements:["晨间完成 3 次呼吸训练","每天记录准备度评分"]},"mission-evening-elite":{title:"夜间精英",description:"优化收尾流程，提升深睡与恢复分数。",requirements:["完成 4 次夜间复位","记录 2 次夜间反思"]},"mission-metabolic-momentum":{title:"代谢动能",description:"一周多次有氧微剂量，激活代谢健康。",requirements:["完成 3 次代谢冲刺","保持 4 天连胜"]}},sessions:{focus:{longevity:"长寿",recovery:"恢复",performance:"表现"},templates:{"template-daily-primer":{title:"每日长寿启动",goal:"10 分钟内唤醒、充能并聚焦。",phases:{"phase-prime-breath":{title:"唤醒式阶梯呼吸",description:"延长呼气的鼻呼吸，引导神经系统就绪。"},"phase-mobility-stack":{title:"灵动组合",description:"为关节与筋膜补水的脊柱流动流程。"},"phase-strength-dose":{title:"力量微剂量",description:"节奏深蹲 + 偏移推压，安全建立力量。"}}},"template-evening-reset":{title:"夜间神经系统重置",goal:"降速并为深度修复做好准备。",phases:{"phase-downshift-breath":{title:"降速呼吸",description:"4-6 节奏的副交感呼吸。"},"phase-fascia-glide":{title:"筋膜滑动",description:"弹力带支持的螺旋灵动，释放紧张。"},"phase-reflection":{title:"总结与书写",description:"记录微胜与明日的准备信号。"}}},"template-metabolic-surge":{title:"代谢冲刺快线",goal:"通过可控有氧爆发提升代谢弹性。",phases:{"phase-warm-coord":{title:"热身协调",description:"平衡 + 大脑模式，激活神经系统。"},"phase-intervals":{title:"有氧微间歇",description:"低冲击弹跳配合节奏攀升。"},"phase-cool-breath":{title:"冷却呼吸",description:"一致性呼吸，带回心率。"}}}}},session:{startStack:"开始组合",minutes:"{{minutes}} 分钟",activeStack:"进行中的组合",resume:"继续",pause:"暂停",finish:"完成",cancel:"取消",totalTime:"总时长",elapsed:"已用时间",phaseLabel:"阶段",phaseCount:"阶段 {{index}}",chooseTitle:"选择你的 10 分钟组合",chooseDescription:"精选灵活、呼吸与力量组合，最低摩擦换取长寿回报。",manualReflection:"手动结束本次训练"},profile:{title:"个人节奏",subtitle:"调整时间窗口与重点领域，让 Pulse·10 更契合你。",wakeWindow:"醒来时间窗",windDownWindow:"收尾时间窗",focusAreasTitle:"重点领域",focusAreas:{mobility:{label:"灵活度",description:"保持关节灵活与韧性。"},strength:{label:"力量",description:"守住肌肉与骨密度。"},cardio:{label:"有氧",description:"强化代谢弹性。"},breathwork:{label:"呼吸",description:"每天平衡你的神经系统。"},mindfulness:{label:"正念",description:"培养情绪调节力。"},cognition:{label:"认知",description:"锻炼神经可塑性。"},nutrition:{label:"营养",description:"植入日常微习惯延长寿命。"}},mobilityAccess:"空间 / 器械条件",mobilityOptions:{limited:"空间受限",standard:"常规配置",full:"完整健身房"},savePreferences:"保存偏好",saveHint:"立即根据新偏好调整推荐。",statsTitle:"执行数据",statsSubtitle:"追踪宏观进度并管理你的数据。",totalHabits:"累计习惯次数",loggedDays:"记录天数",resetToday:"重置今日记录",exportHint:"需要导出数据？可在开发者工具中复制 localStorage 键"},onboarding:{badge:"Pulse·10 入门",title:"打造你的长寿仪式",subtitle:"每天 10 分钟即可叠加健康红利。配置基础参数，解锁专属流程。",launch:"启动我的计划",preferenceSlots:"偏好习惯时段",preferenceHint:"我们将据此推送提醒。",environmentHint:"Pulse·10 将匹配你的器械与节奏推荐 10 分钟组合，你可在个人页随时调整。",mobilityOptions:{limited:{label:"空间受限",detail:"酒店房或办公空间"},standard:{label:"常规配置",detail:"瑜伽垫 + 轻阻力带"},full:{label:"完整配置",detail:"健身房/自由重量/开阔空间"}},steps:{baseline:{title:"设定你的能量基线",description:"设定你通常启动与收尾的时间。"},focus:{title:"锁定长寿重点",description:"选择 3 个优先领域，我们将定制微剂量组合。"},environment:{title:"场景与器械确认",description:"告诉我们可用空间与器械，以匹配合适变式。"}}},ai:{dailyMomentum:{title:"每日长寿动能",summary:"今日完成 {{count}} 个习惯，动能已锁定，持续叠加微胜。",actions:["在反思日志里庆祝本次执行。","明天同一时间复制同一组合，强化习惯回路。","晚上加入降速呼吸，平衡恢复节奏。"]},sessionComplete:{title:"{{session}} 已锁定",summary:"完整执行 {{session}} 组合，额外经验已到账。",actions:["记录本次感受，帮助 AI 优化指导。","提前规划明天的组合，保持滚动连胜。","30 分钟内补充水分与蛋白，放大适应效应。"]},weekly:{title:"每周模式检查",summary:"AI 盘点：准备度 {{readiness}} · 呼吸 {{breath}} 次 · 力量 {{strength}} 次。",actions:{lowReadiness:["明天以夜间复位搭配延长呼气降速。","确保 8 小时睡眠窗口，遵守收尾时间。"],breathwork:"本周至少 3 次呼吸阶梯，为神经系统调频。",strength:"在周二/周四安排力量微剂量，守住瘦肌肉。",energyStable:"能量稳定表现优异，可加入代谢冲刺模块。",lockPlan:"锁定一周节奏：同一时间重复相同组合。"}}}};p.use(h).use(e).init({resources:{en:{translation:P},"zh-CN":{translation:L}},fallbackLng:"en",supportedLngs:["en","zh-CN"],interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]},returnObjects:!0,defaultNS:"translation"});const $=()=>{const{i18n:e,t:s}=t(),a=e.language.startsWith("zh")?"zh-CN":"en";return i.jsxs("label",{className:"flex flex-col items-start text-left text-xs",children:[i.jsx("span",{className:"mb-1 uppercase tracking-wide text-ink-400",children:s("language.label")}),i.jsxs("select",{value:a,onChange:t=>{e.changeLanguage(t.target.value)},className:"rounded-full border border-ink-700 bg-ink-900/70 px-3 py-1.5 text-xs font-medium text-ink-100 outline-none transition focus:border-primary-400",children:[i.jsx("option",{value:"en",children:s("language.en")}),i.jsx("option",{value:"zh-CN",children:s("language.zh")})]})]})},D="AI Insights - ";new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});const E=I({baseURL:"https://api.youware.com/public/v1/ai",apiKey:"sk-YOUWARE"});const H=g({insights:x(g({title:b().min(2),summary:b().min(6),tone:u(["celebrate","coach","warn"]).default("coach"),actions:x(b().min(2)).min(1).max(4)})).min(1).max(3)});async function B(e,t){const i="insights_advisor",s=function(e){const t=globalThis.ywConfig?.ai_config?.[e];if(!t)throw Object.keys(globalThis.ywConfig?.ai_config??{}),new Error(`${D}missing scene configuration: ${e}`);return t}(i),a=E(s.model),n=s.system_prompt,r="function"==typeof n?n({locale:t.locale}):n??"You are the YouWare longevity insights coach. Produce concise, encouraging insights.",o=[`Locale: ${t.locale}`,`Preferred tone: ${t.tone??"coach"}`,"User name (if provided): member","Analyze the following context JSON and craft up to two actionable insights that help the user improve their longevity habit routines.","Focus on connecting readiness, energy, and habit execution. Prioritize next-step actions that fit within ten-minute sessions.",`Context JSON:\n${JSON.stringify(e,null,2)}`];s.model,s.temperature,t.locale;try{const{object:e}=await T({model:a,schema:H,system:r,prompt:o.join("\n\n"),temperature:s.temperature??.5,maxTokens:s.maxTokens??800});return e.insights.length,e.insights.slice(0,t.previewCount??2)}catch(l){const e=l instanceof Error?l.message:"Unknown AI error";throw s.model,new Error(`${D}${e}`)}}const R=[{id:"badge-streak-3",name:"Momentum Spark",condition:"Complete 3 days in a row",icon:"🔥"},{id:"badge-streak-7",name:"Longevity Loop",condition:"Maintain a 7-day streak",icon:"♾️"},{id:"badge-mission-complete",name:"Mission Architect",condition:"Complete any seasonal mission",icon:"🛡️"},{id:"badge-evening-champion",name:"Evening Champion",condition:"Log 5 evening resets in a month",icon:"🌙"},{id:"badge-oxygen-master",name:"Oxygen Mastery",condition:"Accumulate 60 minutes of breathwork",icon:"💨"}],F=[{id:"mission-stability-foundation",title:"Stability Foundation",focus:"mobility",description:"Complete 5 mobility-focused sessions this week to unlock the Movement Catalyst badge.",rewardXp:150,requirements:["Complete 5 mobility habits","Log mobility reflection 3 times"]},{id:"mission-oxygen-advantage",title:"Oxygen Advantage",focus:"resilience",description:"Balance stress and energy by pairing breathwork with focused recovery blocks.",rewardXp:120,requirements:["Complete breathwork 3 mornings","Log readiness score each day"]},{id:"mission-evening-elite",title:"Evening Elite",focus:"recovery",description:"Dial in your wind-down routine to amplify deep sleep and recovery scores.",rewardXp:200,requirements:["Complete evening reset 4 times","Document evening reflections twice"]},{id:"mission-metabolic-momentum",title:"Metabolic Momentum",focus:"metabolic",description:"Prime metabolic health with repeated cardio microdoses across the week.",rewardXp:180,requirements:["Complete metabolic surge 3 times","Maintain streak for 4 days"]}],O={onboarded:!1,preferences:{wakeTime:"06:30",windDownTime:"21:30",focusAreas:["mobility","strength","breathwork"],mobilityAccess:"standard"},availableHabits:[{id:"h-priming-breath",title:"Priming Breath Ladder",category:"breathwork",stage:"activate",baselineMinutes:3,intensity:"light",description:"Guided nasal breathing with extended exhales to prime the nervous system.",benefits:["Nervous system balance","Improved focus","Stress reduction"],tags:["morning","recovery"]},{id:"h-spine-mobility",title:"Spinal Mobility Flow",category:"mobility",stage:"activate",baselineMinutes:4,intensity:"light",description:"Cat-cow, thoracic rotations, and segmental bridge to wake up the spine.",benefits:["Posture","Spinal hydration","Longevity"],tags:["desk","low-impact"]},{id:"h-strength-microdose",title:"Strength Microdose Stack",category:"strength",stage:"elevate",baselineMinutes:6,intensity:"moderate",description:"Alternating tempo squats, offset push, and loaded carry pattern with bodyweight or bands.",benefits:["Lean muscle retention","Bone density","Metabolic health"],tags:["anywhere","progressive"]},{id:"h-cognition-primer",title:"Cognitive Primer",category:"cognition",stage:"activate",baselineMinutes:2,intensity:"light",description:"Dual-task drills and pattern switching to sharpen focus and reaction times.",benefits:["Neuroplasticity","Reaction speed","Mental clarity"],tags:["afternoon","brain-health"]},{id:"h-metabolic-surge",title:"Metabolic Surge Intervals",category:"cardio",stage:"master",baselineMinutes:8,intensity:"vigorous",description:"Low-impact plyometrics with controlled intervals to raise heart rate safely.",benefits:["Metabolic flexibility","VO₂ max","Longevity"],tags:["cardio","advanced"]},{id:"h-evening-reset",title:"Evening Reset Downshift",category:"mindfulness",stage:"activate",baselineMinutes:5,intensity:"light",description:"Parasympathetic breath, light mobility, and journaling prompts to close the day.",benefits:["Sleep quality","Emotional regulation","Recovery"],tags:["evening","sleep"]},{id:"h-fascia-glide",title:"Fascial Glide Wake Up",category:"mobility",stage:"elevate",baselineMinutes:7,intensity:"moderate",description:"Loaded mobility with bands to hydrate fascia and improve tissue glide.",benefits:["Joint longevity","Range of motion","Athleticism"],tags:["midday","equipment"]},{id:"h-balance-brain",title:"Balance + Brain Combo",category:"cognition",stage:"elevate",baselineMinutes:5,intensity:"moderate",description:"Single-leg balance with cognitive load for proprioception and neuro resilience.",benefits:["Fall prevention","Neural drive","Coordination"],tags:["longevity","neuro"]}],sessions:[{id:"template-daily-primer",title:"Daily Longevity Primer",goal:"Mobilize, energize, and focus in 10 minutes.",focus:"longevity",phases:[{id:"phase-prime-breath",title:"Priming Breath Ladder",description:"Guided nasal ladder breathing with extended exhales.",minutes:2,habitId:"h-priming-breath"},{id:"phase-mobility-stack",title:"Mobility Stack",description:"Spinal mobility flow to hydrate joints and fascia.",minutes:4,habitId:"h-spine-mobility"},{id:"phase-strength-dose",title:"Strength Microdose",description:"Tempo squats with offset push pattern to build strength safely.",minutes:4,habitId:"h-strength-microdose"}]},{id:"template-evening-reset",title:"Evening Nervous System Reset",goal:"Downshift and prepare for deep, restorative sleep.",focus:"recovery",phases:[{id:"phase-downshift-breath",title:"Downshift Breath",description:"Parasympathetic breath with 4-6 cadence.",minutes:3,habitId:"h-evening-reset"},{id:"phase-fascia-glide",title:"Fascial Glide",description:"Band-supported spiral mobility to release tension.",minutes:4,habitId:"h-fascia-glide"},{id:"phase-reflection",title:"Reflection + Journaling",description:"Capture micro-wins and readiness cues for tomorrow.",minutes:3,habitId:"h-evening-reset"}]},{id:"template-metabolic-surge",title:"Metabolic Surge Express",goal:"Boost metabolic flexibility with controlled cardio bursts.",focus:"performance",phases:[{id:"phase-warm-coord",title:"Warm-up Coordination",description:"Balance + brain patterning to prep nervous system.",minutes:3,habitId:"h-balance-brain"},{id:"phase-intervals",title:"Cardio Micro-Intervals",description:"Low-impact plyometric intervals and tempo climbs.",minutes:5,habitId:"h-metabolic-surge"},{id:"phase-cool-breath",title:"Cool Down Breath",description:"Coherence breathing to bring heart rate down.",minutes:2,habitId:"h-priming-breath"}]}],gamification:{xp:0,level:1,badges:[],streak:{current:0,longest:0}},history:[],insights:[],insightsLoading:!1,insightsError:void 0,insightsUpdatedAt:void 0},z=e=>Math.floor(e/450)+1,q=(e,t)=>e.find(e=>e.date===t),V=(e,t)=>{const i=e.filter(e=>e.id!==t.id);return[t,...i].slice(0,5)},W=(e,t)=>{const i=e.filter(e=>e.completedHabitIds.length>0).sort((e,t)=>e.date<t.date?-1:1);if(0===i.length)return{xp:0,level:z(0),badges:[],streak:{current:0,longest:0}};const s=i.reduce((e,i)=>e+i.completedHabitIds.reduce((e,i)=>{const s=t.find(e=>e.id===i);return s?e+(e=>{const t="master"===e.stage?80:"elevate"===e.stage?40:20,i="vigorous"===e.intensity?45:"moderate"===e.intensity?25:15;return 10*e.baselineMinutes+t+i})(s):e},0),0),a=z(s),n=i[i.length-1]?.date;let r,o=0,l=0;i.forEach(e=>{const t=f(e.date);if(r){const e=v(t,r);1===e?l+=1:e>1&&(l=1)}else l=1;r=t,l>o&&(o=l)}),o=Math.max(o,1);let d=0;if(n){d=1;let e=n;for(let t=i.length-2;t>=0;t-=1){const s=v(f(e),f(i[t].date));if(1!==s){if(0===s)continue;break}d+=1,e=i[t].date}}const c={current:d,longest:o,...n?{lastCompletedDate:n}:{}},m=((e,t,i)=>{const s=new Set(i.map(e=>e.id)),a=e.reduce((e,t)=>e+3*t.completedHabitIds.filter(e=>e.includes("breath")).length,0),n=y(new Date,{representation:"date"}).slice(0,7),r=e.filter(e=>e.date.slice(0,7)===n).reduce((e,t)=>e+t.completedHabitIds.filter(e=>"h-evening-reset"===e).length,0),o=[];t.current>=3&&!s.has("badge-streak-3")&&o.push("badge-streak-3"),t.current>=7&&!s.has("badge-streak-7")&&o.push("badge-streak-7"),a>=60&&!s.has("badge-oxygen-master")&&o.push("badge-oxygen-master"),r>=5&&!s.has("badge-evening-champion")&&o.push("badge-evening-champion"),s.has("badge-mission-complete")||e.some(e=>e.notes?.includes("Mission Complete"))&&o.push("badge-mission-complete");return 0===o.length?i:[...i,...R.filter(e=>o.includes(e.id))]})(e,c,[]);return{xp:s,level:a,badges:m,streak:c}},U=M()(C((e,t)=>({...O,missions:F,completeHabit:(i,s)=>{const a=t(),n=s?.date??y(new Date,{representation:"date"});if(!a.availableHabits.find(e=>e.id===i))return;const r=q(a.history,n),o=r?{...r,completedHabitIds:Array.from(new Set([...r.completedHabitIds,i])),energy:s?.energy??r.energy,readiness:s?.readiness??r.readiness,mood:s?.mood??r.mood,notes:s?.notes??r.notes}:{date:n,completedHabitIds:[i],energy:s?.energy??"steady",readiness:s?.readiness??70,mood:s?.mood??"focused",notes:s?.notes},l=((e,t)=>{const i=e.findIndex(e=>e.date===t.date);if(i>=0){const s=[...e];return s[i]=t,s}return[...e,t].sort((e,t)=>e.date>t.date?-1:1)})(a.history,o),d=W(l,a.availableHabits),c=o.completedHabitIds.length,m=o.completedHabitIds.length>=2?{id:`insight-${n}`,title:p.t("ai.dailyMomentum.title",{count:c}),summary:p.t("ai.dailyMomentum.summary",{count:c}),actions:[p.t("ai.dailyMomentum.actions.0"),p.t("ai.dailyMomentum.actions.1"),p.t("ai.dailyMomentum.actions.2")],tone:"celebrate"}:void 0;e({history:l,gamification:d,insights:m?V(a.insights,m):a.insights})},uncompleteHabit:(i,s)=>{const a=t(),n=s??y(new Date,{representation:"date"}),r=q(a.history,n);if(!r)return;if(!r.completedHabitIds.includes(i))return;const o=r.completedHabitIds.filter(e=>e!==i);let l;l=0===o.length?a.history.filter(e=>e.date!==n):a.history.map(e=>e.date===n?{...e,completedHabitIds:o}:e);const d=`insight-${n}`;let c=a.insights;if(o.length>=2){const e=a.insights.findIndex(e=>e.id===d);if(e>=0){const t=o.length,i={id:d,title:p.t("ai.dailyMomentum.title",{count:t}),summary:p.t("ai.dailyMomentum.summary",{count:t}),actions:[p.t("ai.dailyMomentum.actions.0"),p.t("ai.dailyMomentum.actions.1"),p.t("ai.dailyMomentum.actions.2")],tone:"celebrate"};c=[...a.insights.slice(0,e),i,...a.insights.slice(e+1)]}}else c=a.insights.filter(e=>e.id!==d);const m=W(l,a.availableHabits);e({history:l,gamification:m,insights:c})},startSession:i=>{const s=t().sessions.find(e=>e.id===i);if(!s)return;const a=s.phases[0],n=y(new Date),r={templateId:i,startTime:n,elapsedSeconds:0,currentPhaseId:a.id,isPaused:!1};e({activeTemplateId:i,activeSession:r})},advanceSession:()=>{const i=t(),s=i.activeSession;if(!s)return;const a=i.sessions.find(e=>e.id===s.templateId);if(!a)return;const n=a.phases.findIndex(e=>e.id===s.currentPhaseId),r=a.phases[n+1];r?e({activeSession:{...s,currentPhaseId:r.id}}):t().finishSession()},pauseSession:()=>{const i=t().activeSession;i&&e({activeSession:{...i,isPaused:!0}})},resumeSession:()=>{const i=t().activeSession;i&&e({activeSession:{...i,isPaused:!1}})},tickSession:i=>{const s=t().activeSession;s&&!s.isPaused&&e({activeSession:{...s,elapsedSeconds:s.elapsedSeconds+i}})},finishSession:i=>{const s=t(),a=s.activeSession;if(!a)return;const n=s.sessions.find(e=>e.id===a.templateId);if(!n)return;const r=y(new Date,{representation:"date"});n.phases.forEach(e=>{s.completeHabit(e.habitId,{date:r})});const o=t().history.map(e=>e.date===r?{...e,sessionReflection:i}:e),l=t().gamification.xp+120,d=z(l),c=p.t(`sessions.templates.${n.id}.title`,{defaultValue:n.title}),m={id:`session-${r}-${n.id}`,title:p.t("ai.sessionComplete.title",{session:c}),summary:p.t("ai.sessionComplete.summary",{session:c}),actions:[p.t("ai.sessionComplete.actions.0"),p.t("ai.sessionComplete.actions.1"),p.t("ai.sessionComplete.actions.2")],tone:"celebrate"};e({activeTemplateId:void 0,activeSession:void 0,history:o,gamification:{...t().gamification,xp:l,level:d},insights:V(t().insights,m)})},abandonSession:()=>{t().activeSession&&e({activeTemplateId:void 0,activeSession:void 0})},setPreferences:i=>{e({preferences:{...t().preferences,...i,focusAreas:i.focusAreas??t().preferences.focusAreas}})},setOnboarded:()=>{e({onboarded:!0})},upsertInsight:i=>{e({insights:V(t().insights,i)})},generateAIInsights:async()=>{const i=t();if(0===i.history.length)return void e({insightsError:p.t("insightsFeed.noHistory"),insightsLoading:!1});e({insightsLoading:!0,insightsError:void 0});const s=(e=>{const t=[...e.history].sort((e,t)=>e.date>t.date?-1:1).slice(0,7),i=new Map(e.availableHabits.map(e=>[e.id,e])),s={};let a=0;t.forEach(e=>{a+=e.completedHabitIds.length,e.completedHabitIds.forEach(e=>{const t=i.get(e)?.category??"other";s[t]=(s[t]??0)+1})});const n=t.map(e=>e.readiness??70),r=n.length>0?n.reduce((e,t)=>e+t,0)/n.length:70,o=Math.round(r);let l="flat";if(n.length>=2){const e=n[0]-n[n.length-1];l=e>5?"up":e<-5?"down":"flat"}const d=n.length>0?Math.round(Math.max(...n)):o,c=n.length>0?Math.round(Math.min(...n)):o,m={};t.forEach(e=>{m[e.energy]=(m[e.energy]??0)+1});const p=t.map(e=>({date:e.date,mood:e.mood,notes:e.notes,readiness:e.readiness??o})),h=t.length>0?`${t[t.length-1].date} to ${t[0].date}`:"no-data";return{preferences:{wakeTime:e.preferences.wakeTime,windDownTime:e.preferences.windDownTime,focusAreas:e.preferences.focusAreas,mobilityAccess:e.preferences.mobilityAccess},gamification:{level:e.gamification.level,xp:e.gamification.xp,currentStreak:e.gamification.streak.current,longestStreak:e.gamification.streak.longest},readiness:{average:o,trend:l,lowest:c,highest:d},habitExecution:{window:h,totalCompleted:a,categories:s},energy:{distribution:m},reflections:p}})(i);if(0!==s.reflections.length)try{const t=await B(s,{locale:p.language,userName:void 0,tone:"coach",previewCount:2});if(0===t.length)return void e({insightsLoading:!1,insightsError:p.t("insightsFeed.errorEmpty")});const i=Date.now();e(e=>{let s=e.insights;return t.forEach((e,t)=>{let a=e.actions.map(e=>e.trim()).filter(e=>e.length>0).slice(0,4);0===a.length&&(a=[e.summary.trim()]);const n={id:`ai-${i}-${t}`,title:e.title.trim(),summary:e.summary.trim(),actions:a,tone:e.tone};s=V(s,n)}),{insights:s,insightsLoading:!1,insightsError:void 0,insightsUpdatedAt:(new Date).toISOString()}})}catch(a){e({insightsLoading:!1,insightsError:p.t("insightsFeed.errorGeneric")})}else e({insightsLoading:!1,insightsError:p.t("insightsFeed.noHistory")})},resetDay:i=>{const s=t(),a=i??y(new Date,{representation:"date"}),n=s.history.filter(e=>e.date!==a),r=W(n,s.availableHabits),o=s.insights.filter(e=>e.id!==`insight-${a}`);e({history:n,gamification:r,insights:o})}}),{name:"pulse-10-store",version:1,partialize:e=>({onboarded:e.onboarded,preferences:e.preferences,availableHabits:e.availableHabits,sessions:e.sessions,gamification:e.gamification,history:e.history,insights:e.insights,insightsUpdatedAt:e.insightsUpdatedAt,missions:e.missions})})),G=()=>{const e=U(e=>e.gamification.level),a=U(e=>e.gamification.streak.current),{t:n,i18n:r}=t(),o=s.useMemo(()=>r.language.startsWith("zh")?k:w,[r.language]),l=s.useMemo(()=>j(new Date,"EEEE, MMM d",{locale:o}),[o]);return i.jsxs("header",{className:"flex w-full items-center justify-between gap-4 rounded-3xl border border-ink-700 bg-ink-800/80 px-5 py-4 text-sm text-ink-200 backdrop-blur",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[0.65rem] uppercase tracking-[0.3em] text-primary-200/80",children:n("topBar.brand")}),i.jsx("h1",{className:"font-display text-xl text-ink-50",children:n("topBar.tagline")}),i.jsx("p",{className:"text-xs text-ink-400",children:l})]}),i.jsxs("div",{className:"flex items-center gap-4 text-right",children:[i.jsx($,{}),i.jsx("div",{className:"h-10 w-px bg-ink-700"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-[0.65rem] uppercase tracking-wide text-ink-400",children:n("common.level")}),i.jsx("p",{className:"font-display text-lg text-primary-200",children:e})]}),i.jsx("div",{className:"h-10 w-px bg-ink-700"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-[0.65rem] uppercase tracking-wide text-ink-400",children:n("common.streak")}),i.jsx("p",{className:"font-display text-lg text-primary-200",children:n("common.daySuffix",{count:a})})]})]})]})},X=[{to:"/",labelKey:"nav.today",icon:"⚡"},{to:"/session",labelKey:"nav.session",icon:"⏱️"},{to:"/insights",labelKey:"nav.insights",icon:"🧠"},{to:"/profile",labelKey:"nav.profile",icon:"🌱"}],K=()=>{const{t:e}=t();return i.jsx("nav",{className:"fixed bottom-4 left-1/2 z-50 flex w-[92%] -translate-x-1/2 items-center justify-between rounded-3xl bg-ink-800/80 px-4 py-3 shadow-subtle backdrop-blur",children:X.map(t=>i.jsxs(a,{to:t.to,end:"/"===t.to,className:({isActive:e})=>"flex h-12 w-16 flex-col items-center justify-center gap-1 rounded-2xl text-xs transition-all duration-200 "+(e?"bg-primary-500/15 text-primary-200 shadow-card":"text-ink-300 hover:text-primary-100"),children:[i.jsx("span",{className:"text-lg",children:t.icon}),i.jsx("span",{className:"font-medium uppercase tracking-wide",children:e(t.labelKey)})]},t.to))})},J=({children:e})=>i.jsxs("div",{className:"relative flex min-h-screen flex-col bg-gradient-to-b from-ink-900 via-ink-900 to-ink-950 px-4 pb-24 pt-6 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mx-auto flex w-full max-w-4xl flex-1 flex-col gap-6 pb-12",children:[i.jsx(G,{}),i.jsx("main",{className:"flex flex-1 flex-col gap-6",children:e})]}),i.jsx(K,{})]}),Y={mobility:"from-primary-400/70 to-primary-500/40",strength:"from-orange-400/70 to-orange-500/40",cardio:"from-rose-400/70 to-rose-500/40",breathwork:"from-sky-400/70 to-sky-500/40",mindfulness:"from-violet-400/70 to-violet-500/40",cognition:"from-amber-400/70 to-amber-500/40",nutrition:"from-lime-400/70 to-lime-500/40"},_=({habit:e,isCompleted:s})=>{const a=U(e=>e.completeHabit),{t:n}=t(),r=n(`habits.stages.${e.stage}`),o=n(`habits.intensity.${e.intensity}`),l=n(`habits.items.${e.id}.title`,{defaultValue:e.title}),d=n(`habits.items.${e.id}.description`,{defaultValue:e.description}),c=e.tags.map(e=>n(`habits.tags.${e}`,{defaultValue:e}));return i.jsxs("article",{className:"relative overflow-hidden rounded-3xl border border-ink-700 bg-ink-800/70 p-4 shadow-subtle backdrop-blur transition-all duration-300 hover:border-primary-400/60",children:[i.jsx("div",{className:`absolute inset-0 -z-10 bg-gradient-to-br ${Y[e.category]} opacity-60`}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[0.65rem] uppercase tracking-wide text-ink-300",children:r}),i.jsx("h2",{className:"font-display text-lg text-ink-50",children:l})]}),i.jsx("button",{onClick:()=>{const t=n(`habits.items.${e.id}.title`,{defaultValue:e.title});a(e.id,{notes:n("habits.completeNoteTemplate",{title:t})})},className:"rounded-full px-4 py-2 text-xs font-semibold uppercase tracking-wide transition-colors "+(s?"bg-ink-900/80 text-primary-200":"bg-primary-500 text-ink-900 hover:bg-primary-400"),children:n(s?"habits.actions.logged":"habits.actions.complete")})]}),i.jsx("p",{className:"mt-4 text-sm text-ink-200",children:d}),i.jsxs("footer",{className:"mt-5 flex flex-wrap items-center gap-2 text-xs text-primary-100",children:[i.jsx("span",{className:"rounded-full border border-primary-300/30 px-3 py-1 uppercase tracking-wide",children:n("habits.metrics",{minutes:e.baselineMinutes,intensity:o})}),c.map(e=>i.jsx("span",{className:"rounded-full border border-ink-600/60 px-2.5 py-1 text-[0.68rem] uppercase",children:e},e))]})]})},Q=()=>{const{level:e,xp:s,badges:a,streak:n}=U(e=>e.gamification),{t:r}=t(),o=Math.min(s%450/450*100,100);return i.jsxs("section",{className:"rounded-3xl border border-ink-700 bg-ink-800/60 p-5",children:[i.jsxs("header",{className:"flex items-center justify-between text-sm text-ink-300",children:[i.jsx("h2",{className:"font-display text-lg text-ink-50",children:r("gamification.title")}),i.jsx("span",{className:"rounded-full border border-primary-400/30 px-3 py-1 text-xs uppercase",children:r("gamification.levelTag",{level:e})})]}),i.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 text-sm text-ink-300 sm:grid-cols-2",children:[i.jsxs("div",{className:"rounded-2xl border border-ink-700/60 bg-ink-900/60 p-4",children:[i.jsx("p",{className:"text-[0.7rem] uppercase tracking-wide text-ink-400",children:r("gamification.xpProgress")}),i.jsx("div",{className:"mt-3 h-2 w-full overflow-hidden rounded-full bg-ink-700",children:i.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-primary-400 via-primary-500 to-primary-300",style:{width:`${o.toFixed(2)}%`}})}),i.jsx("p",{className:"mt-2 text-xs text-ink-400",children:r("gamification.xpSummary",{total:s,next:450-s%450||450})})]}),i.jsxs("div",{className:"rounded-2xl border border-ink-700/60 bg-ink-900/60 p-4",children:[i.jsx("p",{className:"text-[0.7rem] uppercase tracking-wide text-ink-400",children:r("gamification.currentStreak")}),i.jsx("p",{className:"mt-2 font-display text-3xl text-primary-200",children:r("common.days",{count:n.current})}),i.jsx("p",{className:"text-xs text-ink-400",children:r("gamification.longestStreak",{count:n.longest})})]})]}),i.jsxs("div",{className:"mt-5",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-ink-400",children:r("gamification.badges")}),i.jsxs("div",{className:"mt-3 flex flex-wrap gap-3",children:[0===a.length&&i.jsx("span",{className:"text-xs text-ink-500",children:r("gamification.noBadges")}),a.map(e=>i.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-primary-400/30 bg-primary-500/10 px-3 py-2 text-xs text-primary-100",children:[i.jsx("span",{className:"text-lg",children:e.icon}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold uppercase tracking-wide",children:r(`badges.${e.id}.name`,{defaultValue:e.name})}),i.jsx("p",{className:"text-[0.68rem] text-primary-200/80",children:r(`badges.${e.id}.condition`,{defaultValue:e.condition})})]})]},e.id))]})]})]})},Z=()=>{const e=U(e=>e.history),a=U(e=>e.gamification.streak),n=U(e=>e.gamification.xp),{t:r}=t(),o=s.useMemo(()=>j(new Date,"yyyy-MM-dd"),[]),l=e.find(e=>e.date===o),d=l?.completedHabitIds.length??0,c=l?.readiness??0,m=l?.energy??"steady",p=e.slice(0,14);return i.jsxs("section",{className:"rounded-3xl border border-ink-700 bg-ink-800/60 p-5",children:[i.jsxs("header",{className:"flex items-center justify-between text-sm text-ink-300",children:[i.jsx("h2",{className:"font-display text-lg text-ink-50",children:r("progress.title")}),i.jsx("span",{className:"rounded-full border border-primary-400/30 px-3 py-1 text-xs uppercase",children:r("progress.completedLabel",{count:d,total:3})})]}),i.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm text-ink-300 sm:grid-cols-4",children:[i.jsxs("div",{className:"rounded-2xl border border-ink-700/60 bg-ink-900/60 p-3",children:[i.jsx("p",{className:"text-[0.7rem] uppercase tracking-wide text-ink-400",children:r("progress.energy")}),i.jsx("p",{className:"font-display text-2xl text-primary-200",children:r(`progress.energyLevels.${m}`)})]}),i.jsxs("div",{className:"rounded-2xl border border-ink-700/60 bg-ink-900/60 p-3",children:[i.jsx("p",{className:"text-[0.7rem] uppercase tracking-wide text-ink-400",children:r("progress.readiness")}),i.jsx("p",{className:"font-display text-2xl text-primary-200",children:c||"—"})]}),i.jsxs("div",{className:"rounded-2xl border border-ink-700/60 bg-ink-900/60 p-3",children:[i.jsx("p",{className:"text-[0.7rem] uppercase tracking-wide text-ink-400",children:r("common.streak")}),i.jsx("p",{className:"font-display text-2xl text-primary-200",children:r("common.days",{count:a.current})})]}),i.jsxs("div",{className:"rounded-2xl border border-ink-700/60 bg-ink-900/60 p-3",children:[i.jsx("p",{className:"text-[0.7rem] uppercase tracking-wide text-ink-400",children:r("progress.xp")}),i.jsx("p",{className:"font-display text-2xl text-primary-200",children:n})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-ink-400",children:r("progress.lastDays")}),i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:p.map(e=>{const t=e.completedHabitIds.length,s=(.3+.7*Math.min(t/3,1)).toFixed(2);return i.jsx("div",{title:r("progress.heatmapTooltip",{date:e.date,count:t}),className:"h-6 w-6 rounded-lg border border-primary-400/30",style:{background:`rgba(16, 185, 129, ${s})`,boxShadow:t?"0 0 12px rgba(16, 185, 129, 0.35)":"none"}},e.date)})})]})]})},ee=()=>{const e=U(e=>e.availableHabits),s=U(e=>e.history),a=U(e=>e.missions),{t:n}=t(),r=j(new Date,"yyyy-MM-dd"),o=s.find(e=>e.date===r),l=new Set(o?.completedHabitIds??[]);return i.jsxs("div",{className:"flex flex-col gap-6",children:[i.jsx(Z,{}),i.jsxs("section",{className:"grid gap-5 lg:grid-cols-[2fr,1fr]",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("header",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"font-display text-lg text-ink-50",children:n("dashboard.todayTitle")}),i.jsx("span",{className:"text-xs uppercase text-ink-400",children:n("dashboard.tapHint")})]}),i.jsx("div",{className:"grid gap-4",children:e.map(e=>i.jsx(_,{habit:e,isCompleted:l.has(e.id)},e.id))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(Q,{}),i.jsxs("section",{className:"rounded-3xl border border-ink-700 bg-ink-800/60 p-5",children:[i.jsx("h3",{className:"font-display text-lg text-ink-50",children:n("dashboard.missionsTitle")}),i.jsx("p",{className:"text-xs text-ink-400",children:n("dashboard.missionsSubtitle")}),i.jsx("div",{className:"mt-3 space-y-3",children:a.map(e=>i.jsxs("div",{className:"rounded-2xl border border-ink-700/60 bg-ink-900/60 p-4 text-sm text-ink-300",children:[i.jsx("p",{className:"text-[0.7rem] uppercase tracking-wide text-primary-200",children:n(`missions.${e.id}.focus`,{defaultValue:n(`missions.focus.${e.focus}`)})}),i.jsx("p",{className:"font-semibold text-ink-100",children:n(`missions.${e.id}.title`,{defaultValue:e.title})}),i.jsx("p",{className:"mt-1 text-xs text-ink-400",children:n(`missions.${e.id}.description`,{defaultValue:e.description})}),i.jsx("p",{className:"mt-2 text-xs text-primary-200",children:n("missions.reward",{xp:e.rewardXp})}),i.jsx("ul",{className:"mt-2 list-disc pl-5 text-xs text-ink-400",children:e.requirements.map((t,s)=>i.jsx("li",{children:n(`missions.${e.id}.requirements.${s}`,{defaultValue:t})},t))})]},e.id))})]})]})]})]})},te=e=>{const t=Math.floor(e/60),i=e%60;return`${String(t).padStart(2,"0")}:${String(i).padStart(2,"0")}`},ie=({template:e,onStart:s})=>{const{t:a}=t();return i.jsxs(S.article,{layout:!0,className:"flex flex-col gap-4 rounded-3xl border border-ink-700 bg-ink-800/60 p-5 shadow-subtle",whileHover:{translateY:-4},transition:{type:"spring",stiffness:260,damping:22},children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[0.7rem] uppercase tracking-wide text-ink-400",children:a(`sessions.focus.${e.focus}`)}),i.jsx("h3",{className:"font-display text-xl text-ink-50",children:a(`sessions.templates.${e.id}.title`,{defaultValue:e.title})}),i.jsx("p",{className:"mt-1 text-sm text-ink-300",children:a(`sessions.templates.${e.id}.goal`,{defaultValue:e.goal})})]}),i.jsx("button",{onClick:s,className:"rounded-full bg-primary-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-ink-900 transition hover:bg-primary-400",children:a("session.startStack")})]}),i.jsx("div",{className:"grid gap-3 text-sm text-ink-200 sm:grid-cols-3",children:e.phases.map(t=>i.jsxs("div",{className:"rounded-2xl border border-ink-700/60 bg-ink-900/60 p-4",children:[i.jsx("p",{className:"font-semibold text-primary-100",children:a(`sessions.templates.${e.id}.phases.${t.id}.title`,{defaultValue:t.title})}),i.jsx("p",{className:"mt-1 text-xs text-ink-400",children:a(`sessions.templates.${e.id}.phases.${t.id}.description`,{defaultValue:t.description})}),i.jsx("p",{className:"mt-2 text-xs uppercase text-ink-400",children:a("session.minutes",{minutes:t.minutes})})]},t.id))})]})},se=({template:e})=>{const a=U(e=>e.activeSession),n=U(e=>e.advanceSession),r=U(e=>e.pauseSession),o=U(e=>e.resumeSession),l=U(e=>e.tickSession),d=U(e=>e.finishSession),c=U(e=>e.abandonSession),{t:m}=t(),p=s.useMemo(()=>e.phases.reduce((e,t)=>e+60*t.minutes,0),[e.phases]),h=e.phases.findIndex(e=>e.id===a?.currentPhaseId),g=a?.elapsedSeconds??0,x=Math.min(g/p,1),u=s.useMemo(()=>{let t=0;return e.phases.map(e=>{const i=t;return t+=60*e.minutes,{phase:e,start:i,end:t}})},[e.phases]),b=u[h]??u[0],y=b?Math.min((g-b.start)/(60*b.phase.minutes),1):0,f=s.useCallback(()=>l(1),[l]);return((e,t,i,a=1e3)=>{s.useEffect(()=>{if(!e||t)return;const s=window.setInterval(i,a);return()=>window.clearInterval(s)},[e,t,a,i])})(Boolean(a),Boolean(a?.isPaused),f,1e3),s.useEffect(()=>{if(!a)return;if(g>=p)return void d();const e=u[h];e&&g>=e.end&&n()},[g,p,a,u,h,n,d]),i.jsxs("section",{className:"relative overflow-hidden rounded-3xl border border-primary-500/30 bg-ink-900/70 p-6 shadow-card",children:[i.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-primary-400 via-primary-500 to-primary-300",style:{width:100*x+"%"}}),i.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[0.7rem] uppercase tracking-wide text-primary-200",children:m("session.activeStack")}),i.jsx("h2",{className:"font-display text-2xl text-ink-50",children:m(`sessions.templates.${e.id}.title`,{defaultValue:e.title})}),i.jsx("p",{className:"text-sm text-ink-300",children:m(`sessions.templates.${e.id}.goal`,{defaultValue:e.goal})})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsx("button",{onClick:()=>a?.isPaused?o():r(),className:"rounded-full border border-primary-400/40 bg-primary-500/15 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-primary-100 hover:bg-primary-500/30",children:m(a?.isPaused?"session.resume":"session.pause")}),i.jsx("button",{onClick:()=>d(m("session.manualReflection")),className:"rounded-full border border-rose-500/50 bg-rose-500/10 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-rose-200 hover:bg-rose-500/20",children:m("session.finish")}),i.jsx("button",{onClick:c,className:"rounded-full border border-ink-700 px-4 py-2 text-xs uppercase tracking-wide text-ink-400 hover:text-ink-200",children:m("session.cancel")})]})]}),i.jsxs("div",{className:"mt-6 grid gap-4 sm:grid-cols-3",children:[i.jsxs("div",{className:"rounded-2xl border border-ink-700/60 bg-ink-800/60 p-4",children:[i.jsx("p",{className:"text-[0.7rem] uppercase tracking-wide text-ink-400",children:m("session.totalTime")}),i.jsx("p",{className:"font-display text-3xl text-primary-200",children:te(p)})]}),i.jsxs("div",{className:"rounded-2xl border border-ink-700/60 bg-ink-800/60 p-4",children:[i.jsx("p",{className:"text-[0.7rem] uppercase tracking-wide text-ink-400",children:m("session.elapsed")}),i.jsx("p",{className:"font-display text-3xl text-primary-200",children:te(g)})]}),i.jsxs("div",{className:"rounded-2xl border border-ink-700/60 bg-ink-800/60 p-4",children:[i.jsx("p",{className:"text-[0.7rem] uppercase tracking-wide text-ink-400",children:m("session.phaseLabel")}),i.jsx("p",{className:"font-display text-xl text-primary-200",children:b?m(`sessions.templates.${e.id}.phases.${b.phase.id}.title`,{defaultValue:b.phase.title}):"--"}),i.jsx("div",{className:"mt-2 h-1.5 w-full overflow-hidden rounded-full bg-ink-700",children:i.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-primary-400 via-primary-500 to-primary-300",style:{width:`${Math.max(0,Math.min(100*y,100))}%`}})})]})]}),i.jsx("div",{className:"mt-6 grid gap-3 sm:grid-cols-3",children:u.map(({phase:t,start:s},a)=>{const n=Math.min(Math.max(g-s,0),60*t.minutes),r=Math.min(n/(60*t.minutes),1);return i.jsxs("div",{className:"rounded-2xl border p-4 "+(a===h?"border-primary-400/70 bg-primary-500/5":"border-ink-700/60 bg-ink-800/60"),children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-ink-400",children:m("session.phaseCount",{index:a+1})}),i.jsx("p",{className:"font-semibold text-primary-100",children:m(`sessions.templates.${e.id}.phases.${t.id}.title`,{defaultValue:t.title})}),i.jsx("p",{className:"mt-1 text-xs text-ink-400",children:m(`sessions.templates.${e.id}.phases.${t.id}.description`,{defaultValue:t.description})}),i.jsx("div",{className:"mt-3 h-1.5 w-full overflow-hidden rounded-full bg-ink-700",children:i.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-primary-400 via-primary-500 to-primary-300",style:{width:100*r+"%"}})})]},t.id)})})]})},ae=()=>{const e=U(e=>e.sessions),s=U(e=>e.activeSession),a=U(e=>e.startSession),{t:n}=t(),r=e.find(e=>e.id===s?.templateId);return i.jsx("section",{className:"space-y-6",children:i.jsx(N,{initial:!1,children:r&&s?i.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{duration:.3},children:i.jsx(se,{template:r})},"active-session"):i.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{duration:.3},className:"space-y-4",children:[i.jsx("h2",{className:"font-display text-2xl text-ink-50",children:n("session.chooseTitle")}),i.jsx("p",{className:"text-sm text-ink-400",children:n("session.chooseDescription")}),i.jsx("div",{className:"grid gap-5",children:e.map(e=>i.jsx(ie,{template:e,onStart:()=>a(e.id)},e.id))})]},"template-list")})})},ne=()=>i.jsx("div",{className:"space-y-6",children:i.jsx(ae,{})}),re={celebrate:"from-primary-400/80 via-primary-500/40 to-emerald-500/10",coach:"from-blue-400/60 via-sky-500/30 to-blue-500/10",warn:"from-amber-400/60 via-orange-500/30 to-rose-500/20"},oe=({insight:e})=>i.jsxs("article",{className:"relative overflow-hidden rounded-3xl border border-ink-700 bg-ink-800/70 p-5",children:[i.jsx("div",{className:`pointer-events-none absolute inset-0 -z-10 bg-gradient-to-br ${re[e.tone]} opacity-80`}),i.jsx("h3",{className:"font-display text-lg text-ink-50",children:e.title}),i.jsx("p",{className:"mt-2 text-sm text-ink-200",children:e.summary}),i.jsx("ul",{className:"mt-4 space-y-2 text-sm text-primary-100",children:e.actions.map(e=>i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"mt-[2px] text-base text-primary-200",children:"•"}),i.jsx("span",{children:e})]},e))})]}),le=()=>{const e=U(e=>e.insights),s=U(e=>e.generateAIInsights),a=U(e=>e.insightsLoading),n=U(e=>e.insightsError),r=U(e=>e.insightsUpdatedAt),{t:o,i18n:l}=t(),d=r?new Intl.DateTimeFormat(l.language,{hour:"2-digit",minute:"2-digit"}).format(new Date(r)):null;return i.jsxs("section",{className:"rounded-3xl border border-ink-700 bg-ink-800/60 p-5",children:[i.jsxs("header",{className:"flex flex-col gap-3 text-sm text-ink-300 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"font-display text-lg text-ink-50",children:o("insightsFeed.title")}),i.jsx("p",{className:"text-xs text-ink-400",children:o("insightsFeed.subtitle")})]}),i.jsxs("div",{className:"flex flex-col items-start gap-1 sm:items-end",children:[d&&i.jsx("span",{className:"text-[11px] uppercase tracking-wide text-ink-500",children:o("insightsFeed.lastUpdated",{time:d})}),i.jsx("button",{type:"button",onClick:()=>{s()},disabled:a,className:"rounded-full border border-primary-500/40 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-primary-100 transition "+(a?"cursor-not-allowed bg-primary-500/10 opacity-70":"bg-primary-500/15 hover:bg-primary-500/30"),children:o(a?"insightsFeed.loading":"insightsFeed.refresh")})]})]}),n&&i.jsx("p",{className:"mt-3 rounded-lg border border-rose-500/40 bg-rose-500/10 px-4 py-3 text-sm text-rose-200",children:n}),i.jsxs("div",{className:"mt-4 grid gap-4",children:[a&&0===e.length&&i.jsx("p",{className:"text-sm text-ink-400",children:o("insightsFeed.loading")}),!a&&0===e.length&&!n&&i.jsx("p",{className:"text-sm text-ink-400",children:o("insightsFeed.empty")}),e.map(e=>i.jsx(oe,{insight:e},e.id))]})]})},de=()=>{const e=U(e=>e.history),{t:s,i18n:a}=t(),n=a.language.startsWith("zh")?k:w;return 0===e.length?i.jsx("div",{className:"rounded-3xl border border-ink-700 bg-ink-800/60 p-5 text-sm text-ink-400",children:s("history.empty")}):i.jsx("div",{className:"space-y-3",children:e.map(e=>i.jsxs("div",{className:"rounded-3xl border border-ink-700 bg-ink-900/60 p-5 text-sm text-ink-200 shadow-subtle",children:[i.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[0.7rem] uppercase tracking-wide text-primary-200",children:j(f(e.date),"EEEE · MMM d",{locale:n})}),i.jsx("p",{className:"font-semibold text-ink-50",children:s("history.summary",{count:e.completedHabitIds.length,readiness:e.readiness??"—"})})]}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-ink-400",children:[i.jsx("span",{children:s(`progress.energyLevels.${e.energy}`)}),i.jsx("span",{children:s("history.mood",{mood:s(`history.moods.${e.mood}`)})})]})]}),e.notes&&i.jsx("p",{className:"mt-3 text-xs text-ink-400",children:s("history.notes",{notes:e.notes})}),e.sessionReflection&&i.jsx("p",{className:"mt-2 text-xs text-primary-100",children:s("history.reflection",{notes:e.sessionReflection})}),i.jsx("div",{className:"mt-4 flex flex-wrap gap-2 text-xs text-primary-100",children:e.completedHabitIds.map(e=>i.jsx("span",{className:"rounded-full border border-primary-400/40 bg-primary-500/10 px-3 py-1 uppercase",children:s(`habits.items.${e}.title`,{defaultValue:e})},e))})]},e.date))})},ce=()=>{const{t:e}=t();return i.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.2fr,0.8fr]",children:[i.jsx(le,{}),i.jsxs("section",{className:"rounded-3xl border border-ink-700 bg-ink-800/60 p-5",children:[i.jsx("h2",{className:"font-display text-lg text-ink-50",children:e("insightsPage.logTitle")}),i.jsx("p",{className:"text-xs text-ink-400",children:e("insightsPage.logSubtitle")}),i.jsx("div",{className:"mt-4 max-h-[70vh] space-y-3 overflow-y-auto pr-1 scrollbar-thin",children:i.jsx(de,{})})]})]})},me=["mobility","strength","cardio","breathwork","mindfulness","cognition","nutrition"],pe=()=>{const e=U(e=>e.preferences),a=U(e=>e.setPreferences),n=U(e=>e.resetDay),r=U(e=>e.history),{t:o}=t(),[l,d]=s.useState(e),c=s.useMemo(()=>r.reduce((e,t)=>e+t.completedHabitIds.length,0),[r]);return i.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr,0.9fr]",children:[i.jsxs("section",{className:"rounded-3xl border border-ink-700 bg-ink-800/60 p-6",children:[i.jsx("h2",{className:"font-display text-lg text-ink-50",children:o("profile.title")}),i.jsx("p",{className:"text-xs text-ink-400",children:o("profile.subtitle")}),i.jsxs("form",{onSubmit:e=>{e.preventDefault(),a(l)},className:"mt-5 space-y-5 text-sm text-ink-200",children:[i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[i.jsxs("label",{className:"flex flex-col gap-2",children:[i.jsx("span",{className:"text-xs uppercase text-ink-400",children:o("profile.wakeWindow")}),i.jsx("input",{type:"time",value:l.wakeTime,onChange:e=>d(t=>({...t,wakeTime:e.target.value})),className:"rounded-2xl border border-ink-700 bg-ink-900/70 px-4 py-3 text-ink-100 outline-none focus:border-primary-400"})]}),i.jsxs("label",{className:"flex flex-col gap-2",children:[i.jsx("span",{className:"text-xs uppercase text-ink-400",children:o("profile.windDownWindow")}),i.jsx("input",{type:"time",value:l.windDownTime,onChange:e=>d(t=>({...t,windDownTime:e.target.value})),className:"rounded-2xl border border-ink-700 bg-ink-900/70 px-4 py-3 text-ink-100 outline-none focus:border-primary-400"})]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-xs uppercase text-ink-400",children:o("profile.focusAreasTitle")}),i.jsx("div",{className:"mt-3 flex flex-wrap gap-3",children:me.map(e=>{const t=l.focusAreas.includes(e);return i.jsxs("button",{type:"button",onClick:()=>(e=>{d(t=>{const i=t.focusAreas.includes(e);return{...t,focusAreas:i?t.focusAreas.filter(t=>t!==e):[...t.focusAreas,e]}})})(e),className:"rounded-2xl border px-4 py-2 text-xs uppercase tracking-wide transition "+(t?"border-primary-400/70 bg-primary-500/15 text-primary-100":"border-ink-700 text-ink-400 hover:border-primary-400/40 hover:text-primary-100"),children:[i.jsx("span",{className:"block font-semibold",children:o(`profile.focusAreas.${e}.label`)}),i.jsx("span",{className:"mt-1 block text-[0.68rem] normal-case text-ink-500",children:o(`profile.focusAreas.${e}.description`)})]},e)})})]}),i.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:i.jsxs("label",{className:"flex flex-col gap-2",children:[i.jsx("span",{className:"text-xs uppercase text-ink-400",children:o("profile.mobilityAccess")}),i.jsxs("select",{value:l.mobilityAccess,onChange:e=>d(t=>({...t,mobilityAccess:e.target.value})),className:"rounded-2xl border border-ink-700 bg-ink-900/70 px-4 py-3 text-ink-100 outline-none focus:border-primary-400",children:[i.jsx("option",{value:"limited",children:o("profile.mobilityOptions.limited")}),i.jsx("option",{value:"standard",children:o("profile.mobilityOptions.standard")}),i.jsx("option",{value:"full",children:o("profile.mobilityOptions.full")})]})]})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"submit",className:"rounded-full bg-primary-500 px-5 py-2 text-xs font-semibold uppercase tracking-wide text-ink-900 hover:bg-primary-400",children:o("profile.savePreferences")}),i.jsx("span",{className:"text-xs text-ink-500",children:o("profile.saveHint")})]})]})]}),i.jsxs("section",{className:"rounded-3xl border border-ink-700 bg-ink-800/60 p-6",children:[i.jsx("h3",{className:"font-display text-lg text-ink-50",children:o("profile.statsTitle")}),i.jsx("p",{className:"text-xs text-ink-400",children:o("profile.statsSubtitle")}),i.jsxs("div",{className:"mt-4 grid gap-4 text-sm text-ink-200",children:[i.jsxs("div",{className:"rounded-2xl border border-ink-700/60 bg-ink-900/60 p-4",children:[i.jsx("p",{className:"text-[0.7rem] uppercase tracking-wide text-ink-400",children:o("profile.totalHabits")}),i.jsx("p",{className:"font-display text-3xl text-primary-200",children:c})]}),i.jsxs("div",{className:"rounded-2xl border border-ink-700/60 bg-ink-900/60 p-4",children:[i.jsx("p",{className:"text-[0.7rem] uppercase tracking-wide text-ink-400",children:o("profile.loggedDays")}),i.jsx("p",{className:"font-display text-3xl text-primary-200",children:r.length})]})]}),i.jsxs("div",{className:"mt-5 space-y-3 text-xs text-ink-400",children:[i.jsx("button",{onClick:()=>n(),className:"w-full rounded-2xl border border-amber-400/40 bg-amber-500/10 px-4 py-3 text-xs font-semibold uppercase tracking-wide text-amber-200 hover:bg-amber-500/20",children:o("profile.resetToday")}),i.jsxs("p",{children:[o("profile.exportHint"),i.jsx("code",{className:"ml-2 rounded bg-ink-900 px-2 py-1 text-[0.7rem]",children:"pulse-10-store"}),"."]})]})]})]})},he=["mobility","strength","cardio","breathwork","mindfulness","cognition","nutrition"],ge=()=>{const e=U(e=>e.onboarded),a=U(e=>e.preferences),r=U(e=>e.setPreferences),o=U(e=>e.setOnboarded),{t:l}=t(),[d,c]=s.useState(0),[m,p]=s.useState(a),[h,g]=s.useState(["07:30","12:30","20:30"]);if(e)return i.jsx(n,{to:"/",replace:!0});const x=[{value:"limited",label:l("onboarding.mobilityOptions.limited.label"),detail:l("onboarding.mobilityOptions.limited.detail")},{value:"standard",label:l("onboarding.mobilityOptions.standard.label"),detail:l("onboarding.mobilityOptions.standard.detail")},{value:"full",label:l("onboarding.mobilityOptions.full.label"),detail:l("onboarding.mobilityOptions.full.detail")}],u=[{title:l("onboarding.steps.baseline.title"),body:i.jsxs("div",{className:"space-y-5",children:[i.jsx("p",{className:"text-sm text-ink-300",children:l("onboarding.steps.baseline.description")}),i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[i.jsxs("label",{className:"flex flex-col gap-2",children:[i.jsx("span",{className:"text-xs uppercase text-ink-400",children:l("profile.wakeWindow")}),i.jsx("input",{type:"time",value:m.wakeTime,onChange:e=>p(t=>({...t,wakeTime:e.target.value})),className:"rounded-2xl border border-ink-700 bg-ink-900/70 px-4 py-3 text-ink-100 outline-none focus:border-primary-400"})]}),i.jsxs("label",{className:"flex flex-col gap-2",children:[i.jsx("span",{className:"text-xs uppercase text-ink-400",children:l("profile.windDownWindow")}),i.jsx("input",{type:"time",value:m.windDownTime,onChange:e=>p(t=>({...t,windDownTime:e.target.value})),className:"rounded-2xl border border-ink-700 bg-ink-900/70 px-4 py-3 text-ink-100 outline-none focus:border-primary-400"})]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-xs uppercase text-ink-400",children:l("onboarding.preferenceSlots")}),i.jsx("div",{className:"mt-3 flex flex-wrap gap-3",children:h.map((e,t)=>i.jsx("input",{type:"time",value:e,onChange:e=>g(i=>{const s=[...i];return s[t]=e.target.value,s}),className:"rounded-2xl border border-ink-700 bg-ink-900/70 px-4 py-3 text-ink-100 outline-none focus:border-primary-400"},e+t))}),i.jsx("p",{className:"mt-2 text-xs text-ink-500",children:l("onboarding.preferenceHint")})]})]})},{title:l("onboarding.steps.focus.title"),body:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-ink-300",children:l("onboarding.steps.focus.description")}),i.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:he.map(e=>{const t=m.focusAreas.includes(e);return i.jsxs("button",{type:"button",onClick:()=>{return t=e,void p(e=>{const i=e.focusAreas.includes(t);return{...e,focusAreas:i?e.focusAreas.filter(e=>e!==t):[...e.focusAreas,t]}});var t},className:"rounded-3xl border p-4 text-left transition "+(t?"border-primary-400/70 bg-primary-500/10 text-primary-100":"border-ink-700 bg-ink-900/60 text-ink-300 hover:border-primary-400/40"),children:[i.jsx("p",{className:"font-semibold uppercase tracking-wide text-xs",children:l(`profile.focusAreas.${e}.label`)}),i.jsx("p",{className:"mt-2 text-xs text-ink-400",children:l(`profile.focusAreas.${e}.description`)})]},e)})})]})},{title:l("onboarding.steps.environment.title"),body:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-ink-300",children:l("onboarding.steps.environment.description")}),i.jsx("div",{className:"grid gap-4 sm:grid-cols-3",children:x.map(e=>i.jsxs("button",{type:"button",onClick:()=>p(t=>({...t,mobilityAccess:e.value})),className:"rounded-3xl border p-4 text-left transition "+(m.mobilityAccess===e.value?"border-primary-400/70 bg-primary-500/10 text-primary-100":"border-ink-700 bg-ink-900/60 text-ink-300 hover:border-primary-400/40"),children:[i.jsx("p",{className:"font-semibold uppercase tracking-wide text-xs",children:e.label}),i.jsx("p",{className:"mt-2 text-xs text-ink-400",children:e.detail})]},e.value))}),i.jsx("div",{className:"rounded-3xl border border-primary-400/40 bg-primary-500/10 p-4",children:i.jsx("p",{className:"text-xs text-primary-100",children:l("onboarding.environmentHint")})})]})}];return i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-ink-900 via-ink-900 to-ink-950 px-6 py-10",children:i.jsxs("div",{className:"mx-auto flex w-full max-w-3xl flex-col gap-6 rounded-[2.5rem] border border-ink-700/70 bg-ink-900/80 p-8 text-ink-200 shadow-card",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-primary-200/70",children:l("onboarding.badge")}),i.jsx("h1",{className:"mt-2 font-display text-3xl text-ink-50",children:l("onboarding.title")}),i.jsx("p",{className:"mt-2 text-sm text-ink-300",children:l("onboarding.subtitle")})]}),i.jsxs("div",{className:"rounded-3xl border border-ink-700 bg-ink-800/70 p-6",children:[i.jsx("h2",{className:"font-display text-xl text-ink-50",children:u[d].title}),i.jsx("div",{className:"mt-4",children:u[d].body}),i.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[i.jsx("div",{className:"flex gap-2",children:u.map((e,t)=>i.jsx("span",{className:"h-2 w-12 rounded-full "+(t<=d?"bg-primary-400":"bg-ink-700")},t))}),i.jsxs("div",{className:"flex items-center gap-3",children:[d>0&&i.jsx("button",{type:"button",onClick:()=>c(e=>Math.max(e-1,0)),className:"rounded-full border border-ink-700 px-4 py-2 text-xs uppercase tracking-wide text-ink-400 hover:text-ink-200",children:l("common.back")}),d<u.length-1?i.jsx("button",{type:"button",onClick:()=>c(e=>Math.min(e+1,u.length-1)),className:"rounded-full bg-primary-500 px-5 py-2 text-xs font-semibold uppercase tracking-wide text-ink-900 hover:bg-primary-400",children:l("common.next")}):i.jsx("button",{type:"button",onClick:()=>{r({...m}),o()},className:"rounded-full bg-primary-500 px-5 py-2 text-xs font-semibold uppercase tracking-wide text-ink-900 hover:bg-primary-400",children:l("onboarding.launch")})]})]})]})]})})},xe=()=>{const e=U(e=>e.onboarded),a=r(),{t:d}=t();return s.useEffect(()=>{document.title=d("app.windowTitle")},[d]),e?i.jsx(J,{children:i.jsxs(o,{children:[i.jsx(l,{path:"/",element:i.jsx(ee,{})}),i.jsx(l,{path:"/session",element:i.jsx(ne,{})}),i.jsx(l,{path:"/insights",element:i.jsx(ce,{})}),i.jsx(l,{path:"/profile",element:i.jsx(pe,{})}),i.jsx(l,{path:"*",element:i.jsx(n,{to:a?.state?.from??"/",replace:!0})})]})}):i.jsxs(o,{children:[i.jsx(l,{path:"/onboarding",element:i.jsx(ge,{})}),i.jsx(l,{path:"*",element:i.jsx(n,{to:"/onboarding",replace:!0})})]})},ue=(()=>{const e=new URL("../",import.meta.url).pathname;return e&&"/"!==e?e.replace(/\/+$/,""):"/"})();d.createRoot(document.getElementById("root")).render(i.jsx(c.StrictMode,{children:i.jsx(m,{basename:ue,children:i.jsx(xe,{})})}));
